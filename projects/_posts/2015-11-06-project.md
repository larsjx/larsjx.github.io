---
layout: projectpost
title: 2 Different RPN Calculators
thumbnail: Jan-Lukasiewicz.jpg
date: 2015-11-06
modal-id: 20003
category: project
---

**November 06, 2015**


<h3>Overview</h3>
>**Reverse Polish Notation (RPN)** is a mathematical notation in which every operator follows all of its operands, in contrast to Polish notation, which puts the operator in the prefix position. It is also known as postfix notation and is parenthesis-free as long as operator arities are fixed. The description "Polish" refers to the nationality of logician Jan Łukasiewicz, who invented (prefix) Polish notation in the 1920s.
>
>Reverse Polish has been found to lead to faster calculations, for two reasons. Because reverse Polish calculators do not need expressions to be parenthesized, fewer operations need to be entered to perform typical calculations. Additionally, users of reverse Polish calculators made fewer mistakes than for other types of calculator.
>
> –[Wikipedia](https://en.wikipedia.org/wiki/Reverse_Polish_notation)

<h4>Below you will find the code for 2 RPN calculators. The first solution is written in Ruby and the second is written in JavaScript.</h4>

<h3>Ruby RPN Calculator</h3>
<h4>by Lars Johnson</h4>
{% highlight ruby %}
class RPNCalculator

  def evaluate(expression)
    @stack = Array.new
    @expression = expression.to_s.split(" ").map { |element| element }
    @list = @expression.map! { |element| element = Integer(element) rescue element}
    @list.each_index { |index|
      @list[index].kind_of?(Integer) ? @stack << @list[index] : case @list[index]
        when "+"
          @value = @stack[-2] + @stack[-1]
          stack_it
        when "-"
          @value = @stack[-2] - @stack[-1]
          stack_it
        when "*"
          @value = @stack[-2] * @stack[-1]
          stack_it
      end
    }
    p @stack[0]
  end

  def stack_it
    2.times { @stack.pop }
    @stack << @value
  end

end

################################################## Ruby Test Code

test_1 = RPNCalculator.new
test_1.evaluate("70 10 4 + 5 * -")

test_2 = RPNCalculator.new
test_2.evaluate("150 10 4 + 5 * -")
{% endhighlight %}

<h3>JavaScript RPN Calculator</h3>
<h4>by Lars Johnson & Paul Gouron</h4>

{% highlight javascript %}
var RPN = function(string){

  var poppush = function () {
          stack.pop()
          stack.pop()
          stack.push(value)
      }

  var input = string.split(" ");
  var stack = []
  var value = 0

  for (var s = 0; s < input.length; s++) {

    if (isNaN(input[s]) === false) {
        stack.push(input[s]);
    }
    else {
      console.log("stack " + stack)

      var first = Number(stack[stack.length-1])
      var second = Number(stack[stack.length-2])

      switch (input[s]) {
        case "+":
          var value = first + second
          poppush()
          break

          case "-":
          var value = first - second
          poppush()
          break

          case "*":
          var value = first * second
          poppush()
          break

          case "/":
          var value = first / second
          poppush()
          break
      }
    }
  }
  return stack
}

######################################################## JavaScript Test Code

console.log(RPN("70 10 4 + 5 * -"))
console.log(RPN("70 10 +"))
console.log(RPN("70 A +")) // -> NaN (letters...)
console.log(RPN("70 +")) // -> NAN (missing a value)
console.log(RPN("5 75 /")) // -> Return 15
{% endhighlight %}